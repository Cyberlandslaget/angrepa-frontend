import { useSetAtom } from 'jotai';
import { useCallback } from 'react';
import { exploitsAtom } from 'utils/atoms';
import { ExploitType } from 'utils/types';

export default function useUpdateExploits() {
  const setExploits = useSetAtom(exploitsAtom);

  const updateExploits = useCallback(
    (newExecutions: ExploitType[]) => {
      setExploits((prev) => {
        const prevExecutions = prev?.filter(
          (e) => !newExecutions.some((n) => n.id === e.id)
        );
        return [...(prevExecutions ?? []), ...newExecutions];
      });
    },
    [setExploits]
  );

  return updateExploits;
}
