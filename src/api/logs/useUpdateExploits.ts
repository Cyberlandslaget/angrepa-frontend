import { useSetAtom } from "jotai";
import { exploitsAtom } from "utils/atoms";
import { ExploitType } from "utils/types";

export default function useUpdateExploits() {
  const setExploits = useSetAtom(exploitsAtom);

  const updateExploits = (newExecutions: ExploitType[]) => {
    setExploits((prev) => {
      const prevExecutions = prev?.filter(e => !newExecutions.some(n => n.id === e.id));
      return [...(prevExecutions ?? []), ...newExecutions];
    });
  };

  return updateExploits;
}