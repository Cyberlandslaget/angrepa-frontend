import {
  Delete,
  EditOutlined,
  InsertDriveFileOutlined,
} from '@mui/icons-material';
import useFiles from 'utils/useFiles';

export default function FileEntry({ filename }: { filename: string }) {
  const { renameFile, removeFile, setSelectedFile, getSelectedFile } =
    useFiles();

  const rename = () => {
    const newName = prompt('Enter new name', filename);
    if (newName) renameFile(filename, newName);
  };

  const remove = () => {
    if (confirm(`Are you sure you want to remove ${filename}?`))
      removeFile(filename);
  };

  const selectFile = () => {
    setSelectedFile(filename);
  };

  return (
    <div
      className={`grid [grid-template-columns:1rem_1fr_1rem_1rem] w-full gap-7 cursor-pointer primaryColor rounded-md p-5 ${
        getSelectedFile()?.name === filename
          ? 'brightness-[80%]'
          : 'hover:brightness-[85%]'
      }`}
      onClick={selectFile}
    >
      <InsertDriveFileOutlined />
      <div>{filename}</div>
      <EditOutlined onClick={rename} titleAccess="Rename file" />
      <Delete onClick={remove} titleAccess="Delete file" />
    </div>
  );
}
